Update src/main.cpp (flags + check-only + dump options)

Note: This uses has_ann(...) from pipeline.cpp. Since it’s static there, main can’t see it.
So add this small helper near the top of main.cpp (or make a shared helper). Easiest: put it in main.cpp:

Add right under includes:

static bool has_ann(const std::vector<Annotation>& anns, const std::string& n) {
  for (auto& a : anns) if (a.name == n) return true;
  return false;
}


(Yes, same name; it’s fine in this TU.)

How you use it
CI / “lint” mode
caps_frontend --check-only demo/demo.caps
echo $?
# 0 if OK, 2 if any errors

Dump AST
caps_frontend --dump-ast demo/demo.caps

Dump topology (Graphviz DOT)
caps_frontend --dump-topology demo/demo.caps > topo.dot


Then render (if you have Graphviz installed):

dot -Tpng topo.dot -o topo.png

Normal (IR dump)
caps_frontend demo/demo.caps
